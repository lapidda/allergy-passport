# ===========================================
# ALLERGY PASSPORT - Application Configuration
# ===========================================

# Server Configuration
server.port=8080
server.servlet.session.timeout=30m

# Reverse Proxy Configuration (for HTTPS behind Nginx)
# Trust X-Forwarded-* headers from reverse proxy
server.forward-headers-strategy=framework
server.tomcat.remoteip.remote-ip-header=x-forwarded-for
server.tomcat.remoteip.protocol-header=x-forwarded-proto
server.tomcat.remoteip.internal-proxies=10\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}|192\\.168\\.\\d{1,3}\\.\\d{1,3}|169\\.254\\.\\d{1,3}\\.\\d{1,3}|127\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}|172\\.1[6-9]{1}\\.\\d{1,3}\\.\\d{1,3}|172\\.2[0-9]{1}\\.\\d{1,3}\\.\\d{1,3}|172\\.3[0-1]{1}\\.\\d{1,3}\\.\\d{1,3}

# ===========================================
# Database Configuration (PostgreSQL)
# ===========================================
spring.datasource.url=jdbc:postgresql://${DB_HOST:localhost}:${DB_PORT:5432}/${DB_NAME:allergypassport}
spring.datasource.username=${DB_USERNAME:allergypassport}
spring.datasource.password=${DB_PASSWORD:allergypassport}
spring.datasource.driver-class-name=org.postgresql.Driver

# JPA / Hibernate
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.open-in-view=false

# ===========================================
# Google OAuth2 Configuration
# ===========================================
spring.security.oauth2.client.registration.google.client-id=${GOOGLE_CLIENT_ID:your-google-client-id}
spring.security.oauth2.client.registration.google.client-secret=${GOOGLE_CLIENT_SECRET:your-google-client-secret}
spring.security.oauth2.client.registration.google.scope=openid,profile,email

# ===========================================
# Thymeleaf Configuration
# ===========================================
spring.thymeleaf.cache=false
spring.thymeleaf.prefix=classpath:/templates/
spring.thymeleaf.suffix=.html

# ===========================================
# Internationalization (i18n)
# ===========================================
spring.messages.basename=i18n/messages
spring.messages.encoding=UTF-8
spring.messages.fallback-to-system-locale=false

# ===========================================
# Translation API Configuration
# ===========================================
# Translation provider: "google-cloud" or "mock" (mock returns original text)
translation.provider=${TRANSLATION_PROVIDER:mock}

# Google Cloud Translation API
google.cloud.project-id=${GOOGLE_CLOUD_PROJECT_ID:}

# Supported languages (ISO 639-1 codes)
# Top 20 languages for restaurants/travel worldwide
app.supported-languages=en,es,fr,de,it,pt,ru,zh,ja,ko,ar,tr,nl,pl,sv,da,no,fi,el,hi

# ===========================================
# Vision API Configuration (OCR Scanner)
# ===========================================
# Vision provider: "google-cloud" or leave unset to disable scanner
# Temporarily hardcoded for testing (replace with ${VISION_PROVIDER:} for production)
vision.provider=google-cloud

# ===========================================
# File Upload Configuration
# ===========================================
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB

# ===========================================
# Application Custom Properties
# ===========================================
app.base-url=${APP_BASE_URL:http://localhost:8080}
app.upload-dir=${UPLOAD_DIR:./uploads}

# QR Code Configuration
app.qr.width=300
app.qr.height=300

# ===========================================
# Logging
# ===========================================
logging.level.com.allergypassport=DEBUG
logging.level.org.springframework.security=DEBUG
logging.level.org.springframework.security.oauth2=DEBUG
logging.level.org.springframework.security.web=DEBUG
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE
